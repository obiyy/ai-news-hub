<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI News Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 600px;
        margin: 0 auto;
    }

    header {
        text-align: center;
        color: white;
        margin-bottom: 30px;
    }

    h1 {
        font-size: 2em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .subtitle {
        opacity: 0.9;
        font-size: 0.9em;
    }

    .loading {
        text-align: center;
        color: white;
        padding: 40px;
        font-size: 1.1em;
    }

    .spinner {
        border: 3px solid rgba(255,255,255,0.3);
        border-top: 3px solid white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .news-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }

    .news-card:active {
        transform: scale(0.98);
    }

    .news-source {
        display: inline-block;
        background: #667eea;
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 0.75em;
        font-weight: 600;
        margin-bottom: 10px;
    }

    .news-title {
        font-size: 1.1em;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 8px;
        line-height: 1.4;
    }

    .news-description {
        color: #4a5568;
        font-size: 0.9em;
        line-height: 1.5;
        margin-top: 8px;
    }

    .news-link {
        color: inherit;
        text-decoration: none;
    }

    .news-date {
        color: #718096;
        font-size: 0.85em;
        margin-top: 8px;
    }

    .error {
        background: white;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        color: #e53e3e;
    }

    .info-box {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: center;
    }

    .info-box h3 {
        color: #2d3748;
        margin-bottom: 10px;
    }

    .info-box p {
        color: #4a5568;
        font-size: 0.9em;
        line-height: 1.6;
    }

    .refresh-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: white;
        border: none;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        cursor: pointer;
        font-size: 24px;
        transition: transform 0.2s;
    }

    .refresh-btn:active {
        transform: scale(0.9) rotate(180deg);
    }

    @media (max-width: 480px) {
        body {
            padding: 15px;
        }

        h1 {
            font-size: 1.5em;
        }

        .news-card {
            padding: 15px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <header>
            <h1>🤖 AI News Hub</h1>
            <p class="subtitle">最新のAI関連ニュースをチェック</p>
        </header>

```
    <div id="news-container">
        <div class="loading">
            <div class="spinner"></div>
            ニュースを読み込み中...
        </div>
    </div>
</div>

<button class="refresh-btn" onclick="loadNews()" title="更新">🔄</button>

<script>
    async function loadNews() {
        const container = document.getElementById('news-container');
        container.innerHTML = '<div class="loading"><div class="spinner"></div>ニュースを読み込み中...</div>';

        try {
            // AllOriginsを使ってCORSを回避
            const corsProxy = 'https://api.allorigins.win/get?url=';
            const rssUrl = 'https://rss.app/feeds/v1.1/sM4LJjHIXbYBiMPX.json';
            
            const response = await fetch(corsProxy + encodeURIComponent(rssUrl));
            
            if (!response.ok) {
                throw new Error('ニュースフィードの取得に失敗しました');
            }
            
            const data = await response.json();
            const feedData = JSON.parse(data.contents);
            
            if (!feedData.items || feedData.items.length === 0) {
                throw new Error('ニュースが見つかりませんでした');
            }

            const allNews = feedData.items.map(item => ({
                source: item.source || 'AI News',
                title: cleanText(item.title),
                description: cleanText(item.description || item.content_text || ''),
                link: item.url,
                date: new Date(item.date_published)
            }));

            // 日付でソート
            allNews.sort((a, b) => b.date - a.date);

            // 上位30件
            const topNews = allNews.slice(0, 30);

            container.innerHTML = topNews.map(news => `
                <div class="news-card">
                    <span class="news-source">${news.source}</span>
                    <div class="news-title">
                        <a href="${news.link}" target="_blank" rel="noopener noreferrer" class="news-link">
                            ${news.title}
                        </a>
                    </div>
                    ${news.description ? `<div class="news-description">${truncateText(news.description, 150)}</div>` : ''}
                    <div class="news-date">${formatDate(news.date)}</div>
                </div>
            `).join('');

        } catch (error) {
            console.error('Load news error:', error);
            container.innerHTML = `
                <div class="info-box">
                    <h3>⚠️ ニュースの読み込みに問題が発生しました</h3>
                    <p>現在、外部APIの制限により自動取得が困難な状況です。</p>
                    <p style="margin-top: 15px;">代替案として以下をご検討ください：</p>
                </div>
                <div class="news-card">
                    <div class="news-title">
                        <a href="https://openai.com/news/" target="_blank" rel="noopener noreferrer" class="news-link">
                            OpenAI News
                        </a>
                    </div>
                    <div class="news-description">OpenAIの公式ニュースページ</div>
                </div>
                <div class="news-card">
                    <div class="news-title">
                        <a href="https://www.anthropic.com/news" target="_blank" rel="noopener noreferrer" class="news-link">
                            Anthropic News
                        </a>
                    </div>
                    <div class="news-description">Anthropicの公式ニュースページ</div>
                </div>
                <div class="news-card">
                    <div class="news-title">
                        <a href="https://blog.google/technology/ai/" target="_blank" rel="noopener noreferrer" class="news-link">
                            Google AI Blog
                        </a>
                    </div>
                    <div class="news-description">GoogleのAI関連ブログ</div>
                </div>
                <div class="news-card">
                    <div class="news-title">
                        <a href="https://www.technologyreview.com/topic/artificial-intelligence/" target="_blank" rel="noopener noreferrer" class="news-link">
                            MIT Technology Review - AI
                        </a>
                    </div>
                    <div class="news-description">MITのテクノロジーレビュー AI特集</div>
                </div>
                <div class="news-card">
                    <div class="news-title">
                        <a href="https://techcrunch.com/category/artificial-intelligence/" target="_blank" rel="noopener noreferrer" class="news-link">
                            TechCrunch - AI
                        </a>
                    </div>
                    <div class="news-description">TechCrunchのAIカテゴリー</div>
                </div>
            `;
        }
    }

    function cleanText(text) {
        const tmp = document.createElement('div');
        tmp.innerHTML = text;
        return tmp.textContent || tmp.innerText || '';
    }

    function truncateText(text, maxLength) {
        if (text.length <= maxLength) return text;
        return text.substr(0, maxLength) + '...';
    }

    function formatDate(date) {
        const now = new Date();
        const diff = now - date;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);

        if (minutes < 1) return '今';
        if (minutes < 60) return `${minutes}分前`;
        if (hours < 24) return `${hours}時間前`;
        if (days < 7) return `${days}日前`;
        
        return date.toLocaleDateString('ja-JP', { 
            month: 'short', 
            day: 'numeric' 
        });
    }

    loadNews();
</script>
```

</body>
</html>